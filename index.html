<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LibAscon: LibAscon - Lightweight Authenticated Encryption &amp; Hashing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LibAscon
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Lightweight Authenticated Encryption &amp; Hashing,         also with Init-Update-Final paradigm.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">LibAscon - Lightweight Authenticated Encryption &amp; Hashing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>LibAscon is an ISO C11 cryptographic library wrapping the <a href="https://github.com/ascon/ascon-c">reference C implementation</a> of the Ascon family of lightweight authenticated encryption schemes with associated data (AEAD) and hashing functions, but it also includes Init-Update-Final processing and variable tag length.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features</h1>
<p>LibAscon provides:</p>
<ul>
<li>3 AEAD ciphers:<ul>
<li>Ascon128 v1.2 (128 b key, 64 b rate)</li>
<li>Ascon128a v1.2 (128 b key, 128 b rate)</li>
<li>Ascon80pq v1.2 (160 b key, 64 b rate)</li>
</ul>
</li>
<li>2 hashing functions<ul>
<li>Ascon-Hash v1.2 (fixed-length output)</li>
<li>Ascon-XOF v1.2 (variable-length output)</li>
</ul>
</li>
<li><b>Online processing</b> (<b>Init-Update-Final</b> paradigm) for hashing and encryption/decryption. This means that the data can be processed one chunk at the time. Useful when operating on large amounts of data that are not available contiguously in memory, e.g. a too-large file or data in transmission.</li>
<li>Naturally offline processing (whole data contiguous in memory) is also available with a simple wrapper.</li>
<li><p class="startli"><b>Variable tag length</b> for authenticated encryption: can generate any tag length <b>from 0 to 255 bytes</b>. Of course at least 16 bytes (128 bits) is recommended.</p>
<p class="startli">Note: the tag bytes above 16 bytes are an extension of the original Ascon algorithm using the same sponge squeezing technique as for the XOF;</p>
</li>
<li>Encryption/decryption can be performed in-place, without the need of a second output buffer;</li>
<li>A <b><a href="https://thematjaz.github.io/LibAscon/">heavily documented</a> developer-friendly API</b>, making it easier to compile and add to your project, both through static and dynamic inclusion</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
FAQ</h1>
<ul>
<li><p class="startli"><b>Q</b>: May I use this library for-</p>
<p class="startli"><b>A</b>: YES! :D The library (and also the Ascon reference implementation) is released under the Creative Commons Zero (CC0) license which basically(*) means you can do whatever you want with it. Commercial purposes, personal projects, modifications of it, anything goes.</p>
<p class="startli">(*) for the legally-binding text check the <a class="el" href="md__l_i_c_e_n_s_e.html">license file</a>.</p>
</li>
<li><p class="startli"><b>Q</b>: Where is the documentation?</p>
<p class="startli"><b>A</b>: The <a href="inc/ascon.h">library header file <code>inc/ascon.h</code></a> is documented with Doxygen and you can find it <a href="https://thematjaz.github.io/LibAscon/">compiled here</a>.</p>
</li>
<li><p class="startli"><b>Q</b>: Why should I use Ascon-AEAD instead of, say, AES?</p>
<p class="startli"><b>A</b>: Ascon is designed to be lightweight (great for embedded systems) and natively supports authenticated encryption of data of any length, while AES must be wrapped in an AEAD mode such as AES-GCM, which is well-proven but heavier.</p>
</li>
<li><p class="startli"><b>Q</b>: Why should I use Ascon-Hash instead of, say, SHA-256?</p>
<p class="startli"><b>A</b>: Ascon is designed to be lightweight (great for embedded systems) and does not suffer from length-extension attacks as SHA-256, given its sponge construction (similarly to what SHA-3 does). Additionally Ascon offers also the XOF hashing producing digests of variable length.</p>
</li>
<li><p class="startli"><b>Q</b>: Who designed Ascon? Who wrote this library?</p>
<p class="startli"><b>A</b>: Check the <a class="el" href="md__a_u_t_h_o_r_s.html">Authors file</a> for details.</p>
</li>
<li><p class="startli"><b>Q</b>: I don't trust Ascon.</p>
<p class="startli"><b>A</b>: Good. You should not keep your guard up for everything, but Ascon has been selected as the primary choice for lightweight authenticated encryption in the final portfolio of the <a href="https://competitions.cr.yp.to/caesar-submissions.html">CAESAR competition (2014–2019)</a> and is currently competing in the <a href="https://csrc.nist.gov/projects/lightweight-cryptography">NIST Lightweight Cryptography competition (2019–)</a>. Cryptographers like it and that's a good sign, right?</p>
</li>
<li><p class="startli"><b>Q</b>: I don't trust this implementation.</p>
<p class="startli"><b>A</b>: Good, again. First of all you can read the source code to see what it does to be sure ;) If you find any bugs or possible improvements, open a pull request or an issue. I would like to make as clear and as good as possible.</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Usage example</h1>
<div class="fragment"><div class="line"><span class="comment">// Initialisation</span></div>
<div class="line"><span class="comment">// We need the key and the nonce, both 128 bits.</span></div>
<div class="line"><span class="comment">// Note: Ascon80pq uses longer keys</span></div>
<div class="line"><span class="keyword">const</span> uint8_t secret_key[<a class="code" href="ascon_8h.html#a5d925f62c1deac9834156f754ec6c365">ASCON_AEAD128_KEY_LEN</a>] = {</div>
<div class="line">        1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6</div>
<div class="line">};</div>
<div class="line"><span class="keyword">const</span> uint8_t unique_nonce[<a class="code" href="ascon_8h.html#af7ad24ebb29bc3179e2b0a11c1b782e8">ASCON_AEAD_NONCE_LEN</a>] = {</div>
<div class="line">        1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6</div>
<div class="line">};</div>
<div class="line"><a class="code" href="structascon__aead__ctx__t.html">ascon_aead_ctx_t</a> ctx;</div>
<div class="line"><a class="code" href="ascon_8h.html#a3b6d5f400bbacd57d45ec228bb772fb7">ascon_aead128_init</a>(&amp;ctx, secret_key, unique_nonce);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now we feed any associated data into the cipher first</span></div>
<div class="line"><span class="comment">// Our data is fragmented into 2 parts, so we feed one at the time.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> associated_data_pt1[] = <span class="stringliteral">&quot;2 messages will foll&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> associated_data_pt2[] = <span class="stringliteral">&quot;ow, but they are both secret.&quot;</span>;</div>
<div class="line"><a class="code" href="ascon_8h.html#a6d5a5621b6c7e9c280aea59384aaf253">ascon_aead128_assoc_data_update</a>(&amp;ctx, (uint8_t*) associated_data_pt1, strlen</div>
<div class="line">        (associated_data_pt1));</div>
<div class="line"><a class="code" href="ascon_8h.html#a6d5a5621b6c7e9c280aea59384aaf253">ascon_aead128_assoc_data_update</a>(&amp;ctx, (uint8_t*) associated_data_pt2, strlen</div>
<div class="line">        (associated_data_pt2));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Next, we feed the plaintext, which is also fragmented in 2 parts.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> plaintext_pt1[] = <span class="stringliteral">&quot;Hello, I&#39;m a secret mes&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> plaintext_pt2[] = <span class="stringliteral">&quot;sage and I should be encrypted!&quot;</span>;</div>
<div class="line">uint8_t buffer[100];</div>
<div class="line"><span class="comment">// The ciphertext is generated block-wise, so we need the return value</span></div>
<div class="line"><span class="comment">// to know how to offset the pointer to where the next ciphertext</span></div>
<div class="line"><span class="comment">// part should be written.</span></div>
<div class="line"><span class="keywordtype">size_t</span> ciphertext_len = 0;</div>
<div class="line">ciphertext_len += <a class="code" href="ascon_8h.html#aa059df9996a56fe9fbc7367f3804b6d2">ascon_aead128_encrypt_update</a>(</div>
<div class="line">        &amp;ctx, buffer + ciphertext_len,</div>
<div class="line">        (uint8_t*) plaintext_pt1, strlen(plaintext_pt1));</div>
<div class="line">ciphertext_len += <a class="code" href="ascon_8h.html#aa059df9996a56fe9fbc7367f3804b6d2">ascon_aead128_encrypt_update</a>(</div>
<div class="line">        &amp;ctx, buffer + ciphertext_len,</div>
<div class="line">        (uint8_t*) plaintext_pt2, strlen(plaintext_pt2));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Finally, we wrap up the encryption and generate the tag.</span></div>
<div class="line"><span class="comment">// There may still be some trailing ciphertext to be produced.</span></div>
<div class="line"><span class="comment">// The tag length can be specified. ASCON_AEAD_TAG_MIN_SECURE_LEN is</span></div>
<div class="line"><span class="comment">// the minimum recommended (128 b)</span></div>
<div class="line">uint8_t tag[<a class="code" href="ascon_8h.html#a01059c28b3716d7b8e334f770453eb2b">ASCON_AEAD_TAG_MIN_SECURE_LEN</a>];</div>
<div class="line">ciphertext_len += <a class="code" href="ascon_8h.html#a9d59965e94b1590643a09b3b809d0bb6">ascon_aead128_encrypt_final</a>(</div>
<div class="line">        &amp;ctx, buffer + ciphertext_len,</div>
<div class="line">        tag, <a class="code" href="ascon_8h.html#a01059c28b3716d7b8e334f770453eb2b">ASCON_AEAD_TAG_MIN_SECURE_LEN</a>);</div>
<div class="line"><span class="comment">// Now the buffer contains our ciphertext, long ciphertext_len</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Now we can decrypt</span></div>
<div class="line"><a class="code" href="ascon_8h.html#a3b6d5f400bbacd57d45ec228bb772fb7">ascon_aead128_init</a>(&amp;ctx, secret_key, unique_nonce);</div>
<div class="line"><a class="code" href="ascon_8h.html#a6d5a5621b6c7e9c280aea59384aaf253">ascon_aead128_assoc_data_update</a>(&amp;ctx, (uint8_t*) associated_data_pt1,</div>
<div class="line">                                strlen(associated_data_pt1));</div>
<div class="line"><a class="code" href="ascon_8h.html#a6d5a5621b6c7e9c280aea59384aaf253">ascon_aead128_assoc_data_update</a>(&amp;ctx, (uint8_t*) associated_data_pt2,</div>
<div class="line">                                strlen(associated_data_pt2));</div>
<div class="line"><span class="comment">// We perform the decryption in-place, in the same buffer where the</span></div>
<div class="line"><span class="comment">// ciphertext it: to do so, we pass the same pointer for plaintext</span></div>
<div class="line"><span class="comment">// and ciphertext</span></div>
<div class="line"><span class="keywordtype">size_t</span> plaintext_len = 0;</div>
<div class="line">plaintext_len += <a class="code" href="ascon_8h.html#a875b78b43a6fa72bd75e3a4bb84b5190">ascon_aead128_decrypt_update</a>(</div>
<div class="line">        &amp;ctx, buffer,</div>
<div class="line">        buffer, ciphertext_len);</div>
<div class="line"><span class="comment">// The final decryption step automatically checks the tag</span></div>
<div class="line"><span class="keywordtype">bool</span> is_tag_valid = <span class="keyword">false</span>;</div>
<div class="line">plaintext_len += <a class="code" href="ascon_8h.html#a8d0e97ae544ddb8ff0b37265438c89c3">ascon_aead128_decrypt_final</a>(</div>
<div class="line">        &amp;ctx, buffer + plaintext_len,</div>
<div class="line">        &amp;is_tag_valid, tag, <a class="code" href="ascon_8h.html#a01059c28b3716d7b8e334f770453eb2b">ASCON_AEAD_TAG_MIN_SECURE_LEN</a>);</div>
<div class="line">buffer[plaintext_len] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">// Null terminated, because it&#39;s text</span></div>
<div class="line">printf(<span class="stringliteral">&quot;Decrypted msg: %s, tag is valid: %d\n&quot;</span>, buffer, is_tag_valid);</div>
<div class="line"><span class="comment">// The macros ASCON_TAG_OK=true and ASCON_TAG_INVALID=false are also</span></div>
<div class="line"><span class="comment">// available if you prefer them over booleans for is_tag_valid.</span></div>
</div><!-- fragment --><p>For more use-cases, check the test suite.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Known limitations</h1>
<ul>
<li>Because LibAscon is implemented with reuse of existing functions in mind, in order to spare on code size and with the Init-Update-Digest paradigm, which has some internal buffering, the cipher is about <b>4x slower</b> than the <a href="https://github.com/ascon/ascon-c">reference implementation (<code>ref</code>)</a>.</li>
<li>There is no architecture-specific optimisation, only a generic portable implementation using mostly <code>uint64_t</code> data types.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Compiling</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
Static source inclusion</h2>
<ul>
<li>Copy the <code>inc</code> and <code>src</code> folders (or their content) into your existing C project.</li>
<li>Add both to the include folders list.</li>
<li>Add <code>src</code> to the sources folders list.</li>
<li>Compile.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Compiling Ascon into all possible targets</h2>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><p>This will build all targets:</p>
<ul>
<li><code>ascon</code>: a shared library (<code>.dll</code> or <code>.dylib</code>)</li>
<li>static libraries:<ul>
<li><code>asconfull</code> with full feature set</li>
<li><code>ascon128</code> with only Ascon128</li>
<li><code>ascon128a</code> with only Ascon128a</li>
<li><code>ascon80pq</code> with only Ascon80pq</li>
<li><code>asconhash</code> with only Ascon-hash and Ascon-XOF for a smaller build result when not all features are needed</li>
</ul>
</li>
<li><code>testascon</code>: a test runner executable , which test all features</li>
<li><code>benchmark</code>: a simple benchmarking tool to get the number of CPU cycles per processed byte for Ascon128 only</li>
<li><code>doxygen</code>: the Doxygen documentation (if Doxygen is installed)</li>
</ul>
<p>To compile only a single target, for example <code>ascon80pq</code>, run </p><div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --target ascon80pq</div>
</div><!-- fragment --><p>To compile with the optimisation for size, use the <code>-DCMAKE_BUILD_TYPE=MinSizeRel</code> flag instead. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="aascon_8h_html_a5d925f62c1deac9834156f754ec6c365"><div class="ttname"><a href="ascon_8h.html#a5d925f62c1deac9834156f754ec6c365">ASCON_AEAD128_KEY_LEN</a></div><div class="ttdeci">#define ASCON_AEAD128_KEY_LEN</div><div class="ttdoc">Length in bytes of the secret symmetric key used for the Ascon128 cipher.</div><div class="ttdef"><b>Definition:</b> ascon.h:57</div></div>
<div class="ttc" id="aascon_8h_html_aa059df9996a56fe9fbc7367f3804b6d2"><div class="ttname"><a href="ascon_8h.html#aa059df9996a56fe9fbc7367f3804b6d2">ascon_aead128_encrypt_update</a></div><div class="ttdeci">size_t ascon_aead128_encrypt_update(ascon_aead_ctx_t *ctx, uint8_t *ciphertext, const uint8_t *plaintext, size_t plaintext_len)</div><div class="ttdoc">Online symmetric encryption using Ascon128, feeding plaintext and getting ciphertext.</div></div>
<div class="ttc" id="aascon_8h_html_a8d0e97ae544ddb8ff0b37265438c89c3"><div class="ttname"><a href="ascon_8h.html#a8d0e97ae544ddb8ff0b37265438c89c3">ascon_aead128_decrypt_final</a></div><div class="ttdeci">size_t ascon_aead128_decrypt_final(ascon_aead_ctx_t *ctx, uint8_t *plaintext, bool *is_tag_valid, const uint8_t *tag, uint8_t tag_len)</div><div class="ttdoc">Online symmetric decryption using Ascon128, finalisation and tag validation.</div></div>
<div class="ttc" id="aascon_8h_html_af7ad24ebb29bc3179e2b0a11c1b782e8"><div class="ttname"><a href="ascon_8h.html#af7ad24ebb29bc3179e2b0a11c1b782e8">ASCON_AEAD_NONCE_LEN</a></div><div class="ttdeci">#define ASCON_AEAD_NONCE_LEN</div><div class="ttdoc">Length in bytes of the public nonce used for authenticated encryption and decryption.</div><div class="ttdef"><b>Definition:</b> ascon.h:73</div></div>
<div class="ttc" id="astructascon__aead__ctx__t_html"><div class="ttname"><a href="structascon__aead__ctx__t.html">ascon_aead_ctx_t</a></div><div class="ttdoc">Cipher context for authenticated encryption and validated decryption.</div><div class="ttdef"><b>Definition:</b> ascon.h:169</div></div>
<div class="ttc" id="aascon_8h_html_a875b78b43a6fa72bd75e3a4bb84b5190"><div class="ttname"><a href="ascon_8h.html#a875b78b43a6fa72bd75e3a4bb84b5190">ascon_aead128_decrypt_update</a></div><div class="ttdeci">size_t ascon_aead128_decrypt_update(ascon_aead_ctx_t *ctx, uint8_t *plaintext, const uint8_t *ciphertext, size_t ciphertext_len)</div><div class="ttdoc">Online symmetric decryption using Ascon128, feeding ciphertext and getting plaintext.</div></div>
<div class="ttc" id="aascon_8h_html_a3b6d5f400bbacd57d45ec228bb772fb7"><div class="ttname"><a href="ascon_8h.html#a3b6d5f400bbacd57d45ec228bb772fb7">ascon_aead128_init</a></div><div class="ttdeci">void ascon_aead128_init(ascon_aead_ctx_t *ctx, const uint8_t key[ASCON_AEAD128_KEY_LEN], const uint8_t nonce[ASCON_AEAD_NONCE_LEN])</div><div class="ttdoc">Online symmetric encryption/decryption using Ascon128, initialisation.</div></div>
<div class="ttc" id="aascon_8h_html_a01059c28b3716d7b8e334f770453eb2b"><div class="ttname"><a href="ascon_8h.html#a01059c28b3716d7b8e334f770453eb2b">ASCON_AEAD_TAG_MIN_SECURE_LEN</a></div><div class="ttdeci">#define ASCON_AEAD_TAG_MIN_SECURE_LEN</div><div class="ttdoc">Minimum recommended length in bytes of the authentication tag generated by the authenticated encrypti...</div><div class="ttdef"><b>Definition:</b> ascon.h:79</div></div>
<div class="ttc" id="aascon_8h_html_a6d5a5621b6c7e9c280aea59384aaf253"><div class="ttname"><a href="ascon_8h.html#a6d5a5621b6c7e9c280aea59384aaf253">ascon_aead128_assoc_data_update</a></div><div class="ttdeci">void ascon_aead128_assoc_data_update(ascon_aead_ctx_t *ctx, const uint8_t *assoc_data, size_t assoc_data_len)</div><div class="ttdoc">Online symmetric encryption/decryption using Ascon128, feeding associated data.</div></div>
<div class="ttc" id="aascon_8h_html_a9d59965e94b1590643a09b3b809d0bb6"><div class="ttname"><a href="ascon_8h.html#a9d59965e94b1590643a09b3b809d0bb6">ascon_aead128_encrypt_final</a></div><div class="ttdeci">size_t ascon_aead128_encrypt_final(ascon_aead_ctx_t *ctx, uint8_t *ciphertext, uint8_t *tag, uint8_t tag_len)</div><div class="ttdoc">Online symmetric encryption using Ascon128, finalisation and tag generation.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
